package exacto.cmds.tests


@AutoCmd
@Cmd(name="spi_basic", help=" Test for spi connection", man='''
    AUTHOR Kuznetcov
    Test for spi connection between
    Apollon and Afina
    for Afina module:
    1. Send message to Apollon
    2. Receive answer
    3. Print 'Done' on success
''')
@BuildDepends(third_party.bsp.stmf7cube.cube)
module spi_basic {
    source "spi_basic.c"
    depends embox.compat.posix.util.sleep
	depends embox.kernel.lthread.lthread
	depends embox.kernel.lthread.sync.mutex
	
	//depends embox.kernel.thread.core
	//depends embox.kernel.sched.sched

	depends exacto.commander.data_storage
	@NoRuntime depends third_party.bsp.stmf7cube.cube
}
@AutoCmd
@Cmd(name="test_spi_dma_send", help=" Test for sending test array throw spi dma ", man='''
AUTHOR Kuznetcov
''')
module spi_dma_receive_transmit {
	source "spi_dma_receive_transmit.c"

	depends embox.compat.posix.util.sleep
	depends embox.kernel.lthread.lthread
	depends embox.kernel.lthread.sync.mutex
	
    //depends exacto.apollon.spi.spi2
	depends exacto.cmds.tests.spi_dev
	depends exacto.commander.data_storage
	
	//depends third_party.bsp.stmf1cube.cube
}
abstract module spi_dev{

}
@AutoCmd
@Cmd(name="test_afina_transmit", help=" Test for sending test array throw spi dma ", man='''
AUTHOR Kuznetcov
''')
module spi_dma_transmit_receive {
	source "spi_dma_transmit_receive.c"

	depends embox.compat.posix.util.sleep
	depends embox.kernel.lthread.lthread
	depends embox.kernel.lthread.sync.mutex
	
	depends exacto.cmds.tests.spi_dev
	depends exacto.commander.data_storage
}
@AutoCmd
@Cmd(name="test_sensors", help = "")
module sensors {
	source "sensors.c"
	
	depends embox.compat.posix.util.sleep
	depends embox.kernel.lthread.lthread
	depends embox.kernel.lthread.sync.mutex
	
	//depends embox.kernel.thread.core
	//depends embox.kernel.sched.sched

	depends exacto.apollon.spi.spi1
	depends exacto.commander.data_storage
	depends exacto.commander.sensors
	//depends apollon_slave.project.defs
	
	depends third_party.bsp.stmf1cube.cube
}
